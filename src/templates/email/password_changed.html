<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="color-scheme" content="light dark">
    <meta name="supported-color-schemes" content="light dark">
    <title>Security Alert: Password Changed</title>
    <style>
        /* Base styles that work in all email clients */
        body, .email-body {
            margin: 0 !important;
            padding: 0 !important;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;
            background-color: #f5f5f5 !important;
            color: #333333 !important;
        }
        
        .email-container {
            background-color: #ffffff !important;
        }
        
        .header-text {
            color: #ffffff !important;
        }
        
        .body-text {
            color: #333333 !important;
        }
        
        .muted-text {
            color: #666666 !important;
        }
        
        .alert-box {
            background-color: #fff5f5 !important;
            border-left: 4px solid #ff4444 !important;
        }
        
        .info-box {
            background-color: #f9f9f9 !important;
        }
        
        .footer-border {
            border-top: 1px solid #e0e0e0 !important;
        }

        /* Enhanced dark mode for supporting clients */
        @media (prefers-color-scheme: dark) {
            body, .email-body { background-color: #1a1a1a !important; }
            .email-container { background-color: #2d2d2d !important; }
            .header-text { color: #ffffff !important; }
            .body-text { color: #e0e0e0 !important; }
            .muted-text { color: #a0a0a0 !important; }
            .alert-box { background-color: #4a2020 !important; border-color: #ff4444 !important; }
            .info-box { background-color: #333333 !important; }
            .footer-border { border-top-color: #444444 !important; }
        }

        /* Outlook-specific styles */
        @media screen and (-webkit-min-device-pixel-ratio: 0) {
            /* WebKit email clients */
            .outlook-fallback { display: none !important; }
        }
        
        /* Gmail-specific overrides */
        u + .gmail-blend-screen .email-body {
            background-color: #f5f5f5 !important;
        }
        
        u + .gmail-blend-difference .email-body {
            background-color: #1a1a1a !important;
        }
    </style>
    
    <!--[if mso | IE]>
    <style type="text/css">
        /* Fallback for Outlook/IE that don't support modern CSS */
        .email-body { background-color: #f5f5f5 !important; }
        .email-container { background-color: #ffffff !important; }
        .body-text { color: #333333 !important; }
        .muted-text { color: #666666 !important; }
        table { border-collapse: collapse !important; }
    </style>
    <![endif]-->
</head>
<body class="email-body" style="margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; background-color: #f5f5f5; color: #333333;">
    <table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%" style="margin: 0; padding: 20px 0;">
        <tr>
            <td align="center" style="padding: 0;">
                <div class="email-container" style="max-width: 600px; margin: 0 auto; background-color: white; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.08); overflow: hidden;">
                    
                    <!-- Security Alert Header -->
                    <div style="background: linear-gradient(135deg, #ff4444 0%, #cc0000 100%); padding: 40px 20px; text-align: center;">
                        <h1 class="header-text" style="margin: 0; color: white; font-size: 24px; font-weight: 600;">
                            üîê Security Alert
                        </h1>
                        <p style="margin: 10px 0 0; color: rgba(255,255,255,0.95); font-size: 16px;">
                            Your Password Was Changed
                        </p>
                    </div>

                    <!-- Main Content -->
                    <div style="padding: 40px 30px;">
                        <p class="body-text" style="margin: 0 0 20px; font-size: 16px; line-height: 1.6;">
                            Hi {{user_name}},
                        </p>

                        <div class="alert-box" style="background-color: #fff5f5; border-left: 4px solid #ff4444; padding: 15px; margin: 20px 0; border-radius: 4px;">
                            <p class="body-text" style="margin: 0; font-size: 16px; font-weight: 600; color: #cc0000;">
                                Your password was successfully changed.
                            </p>
                        </div>

                        <p class="body-text" style="margin: 20px 0; font-size: 16px; line-height: 1.6;">
                            If you made this change, you can safely ignore this email. If you did not make this change, please take immediate action:
                        </p>

                        <!-- Action Required Section -->
                        <div class="info-box" style="background-color: #f9f9f9; padding: 20px; border-radius: 8px; margin: 20px 0;">
                            <h3 class="body-text" style="margin: 0 0 15px; font-size: 18px; font-weight: 600;">
                                ‚ö†Ô∏è If you didn't change your password:
                            </h3>
                            <ol class="body-text" style="margin: 0; padding-left: 20px; font-size: 15px; line-height: 1.8;">
                                <li>Reset your password immediately at <a href="{{app_url}}/forgot-password" style="color: #0066cc;">{{app_url}}/forgot-password</a></li>
                                <li>Review your account for any unauthorized activity</li>
                                <li>Enable two-factor authentication for added security</li>
                                <li>Contact our support team at <a href="mailto:{{support_email}}" style="color: #0066cc;">{{support_email}}</a></li>
                            </ol>
                        </div>

                        <!-- Change Details -->
                        <div style="background-color: #f9f9f9; padding: 20px; border-radius: 8px; margin: 20px 0;">
                            <h3 class="body-text" style="margin: 0 0 15px; font-size: 16px; font-weight: 600;">
                                Change Details:
                            </h3>
                            <table cellpadding="0" cellspacing="0" border="0" width="100%">
                                <tr>
                                    <td class="muted-text" style="padding: 5px 0; font-size: 14px; color: #666666;">
                                        <strong>Time:</strong>
                                    </td>
                                    <td class="body-text" style="padding: 5px 0 5px 20px; font-size: 14px;">
                                        {{timestamp}}
                                    </td>
                                </tr>
                                <tr>
                                    <td class="muted-text" style="padding: 5px 0; font-size: 14px; color: #666666;">
                                        <strong>IP Address:</strong>
                                    </td>
                                    <td class="body-text" style="padding: 5px 0 5px 20px; font-size: 14px;">
                                        {{ip_address}}
                                    </td>
                                </tr>
                                <tr>
                                    <td class="muted-text" style="padding: 5px 0; font-size: 14px; color: #666666;">
                                        <strong>Device:</strong>
                                    </td>
                                    <td class="body-text" style="padding: 5px 0 5px 20px; font-size: 14px;">
                                        {{user_agent}}
                                    </td>
                                </tr>
                            </table>
                        </div>

                        <!-- Security Tips -->
                        <div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid #e0e0e0;">
                            <h3 class="body-text" style="margin: 0 0 15px; font-size: 16px; font-weight: 600;">
                                üí° Security Tips:
                            </h3>
                            <ul class="muted-text" style="margin: 0; padding-left: 20px; font-size: 14px; line-height: 1.6; color: #666666;">
                                <li>Use a unique password for each account</li>
                                <li>Enable two-factor authentication when available</li>
                                <li>Never share your password with anyone</li>
                                <li>Be cautious of phishing emails asking for your password</li>
                            </ul>
                        </div>
                    </div>

                    <!-- Footer -->
                    <div class="footer-border" style="border-top: 1px solid #e0e0e0; padding: 30px; text-align: center;">
                        <p class="muted-text" style="margin: 0 0 10px; font-size: 13px; color: #999999;">
                            This is an automated security notification from {{app_name}}.
                        </p>
                        <p class="muted-text" style="margin: 0 0 10px; font-size: 13px; color: #999999;">
                            If you need help, contact us at <a href="mailto:{{support_email}}" style="color: #0066cc; text-decoration: none;">{{support_email}}</a>
                        </p>
                        <p class="muted-text" style="margin: 15px 0 0; font-size: 12px; color: #bbbbbb;">
                            ¬© {{app_name}}. All rights reserved.
                        </p>
                    </div>
                </div>
            </td>
        </tr>
    </table>
</body>
</html>