# Database Configuration
DATABASE_URL=postgresql://qck_user:qck_password@localhost:12001/qck_db

# IMPORTANT: PostgreSQL must be configured to handle these connections!
# Edit postgresql.conf: max_connections = 500 (or higher)
# Each connection uses ~10MB RAM, so 500 connections = 5GB RAM

# Connection Pool Settings - Production Scaling Guide:
# QCK PRODUCTION TARGET: 1M clicks/day (12 avg/s, 100 peak/s)
# - DATABASE_MAX_CONNECTIONS=300 (recommended for 1M clicks/day)
# - 2M clicks/day: 500 connections
# - 5M+ clicks/day: 800+ connections + PgBouncer + Read Replicas
DATABASE_MAX_CONNECTIONS=200  # Development setting (Prod: 300 for 1M clicks/day)
DATABASE_MIN_CONNECTIONS=20   # Keep warm connections ready
DATABASE_CONNECT_TIMEOUT=10
DATABASE_IDLE_TIMEOUT=1800
DATABASE_MAX_LIFETIME=3600
DATABASE_TEST_BEFORE_ACQUIRE=true
DATABASE_STATEMENT_CACHE=100

# Redis Configuration
REDIS_URL=redis://localhost:12002

# REDIS CONNECTION POOL SCALING GUIDE:
# QCK PRODUCTION TARGET: 1M clicks/day with 95% cache hit ratio
# - REDIS_POOL_SIZE=150 (recommended for 1M clicks/day)
# - 2M clicks/day: 250 connections  
# - 5M+ clicks/day: 400+ connections + Redis Cluster
REDIS_POOL_SIZE=50            # Development setting (Prod: 150 for 1M clicks/day)
REDIS_CONNECTION_TIMEOUT=5    # Seconds to establish connection
REDIS_COMMAND_TIMEOUT=5       # Seconds for command execution
REDIS_RETRY_ATTEMPTS=3        # Number of retry attempts
REDIS_RETRY_DELAY=100         # Initial delay in milliseconds

# ClickHouse Configuration (for future use)
CLICKHOUSE_URL=http://localhost:12003

# Application Configuration
JWT_SECRET=your-super-secret-jwt-key-change-in-production
RUST_LOG=debug,qck_backend=debug,sqlx=info
ENVIRONMENT=development