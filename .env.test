# Test Environment Configuration
# This file is used for running tests

# ============================================================================
# DATABASE CONFIGURATION (PostgreSQL)
# ============================================================================
DATABASE_URL=postgresql://qck_user:qck_password@localhost:12001/qck_test
DATABASE_MAX_CONNECTIONS=10
DATABASE_MIN_CONNECTIONS=1
DATABASE_CONNECT_TIMEOUT=10
DATABASE_IDLE_TIMEOUT=60
DATABASE_MAX_LIFETIME=300

# ============================================================================
# REDIS CONFIGURATION
# ============================================================================
REDIS_URL=redis://localhost:12002
REDIS_POOL_SIZE=5
REDIS_CONNECTION_TIMEOUT=5
REDIS_RESPONSE_TIMEOUT=5

# ============================================================================
# CLICKHOUSE CONFIGURATION
# ============================================================================
CLICKHOUSE_URL=http://localhost:12003
CLICKHOUSE_DATABASE=qck_test
CLICKHOUSE_USER=qck_user
CLICKHOUSE_PASSWORD=qck_password

# ============================================================================
# SECURITY CONFIGURATION
# ============================================================================
# JWT HS256 Configuration (Test)
JWT_ACCESS_SECRET=test-access-secret-hs256
JWT_REFRESH_SECRET=test-refresh-secret-hs256
JWT_ACCESS_EXPIRY=3600      # 1 hour for tests
JWT_REFRESH_EXPIRY=86400    # 1 day (without remember_me)
JWT_KEY_VERSION=1
JWT_AUDIENCE=test.qck.sh
JWT_ISSUER=test.qck.sh
BCRYPT_COST=4
JTI_HASH_SALT=test-jti-salt-for-secure-refresh-token-hashing-32bytes-minimum-required

# Rate Limiting Configuration (Test - Very lenient)
RATE_LIMIT_PER_SECOND=1000
RATE_LIMIT_BURST=2000
RATE_LIMIT_ANALYTICS_SAMPLE_RATE=0.0
CORS_ALLOWED_ORIGINS=*

# Refresh Token Rate Limiting (Test)
REFRESH_RATE_LIMIT_MAX_REQUESTS=100
REFRESH_RATE_LIMIT_WINDOW_SECONDS=60
REFRESH_RATE_LIMIT_BURST_LIMIT=10
REFRESH_RATE_LIMIT_BLOCK_DURATION=60

# ============================================================================
# APPLICATION CONFIGURATION
# ============================================================================
ENVIRONMENT=test
RUST_LOG=warn,qck_backend=debug
RUST_BACKTRACE=1
BIND_ADDRESS=0.0.0.0:15000

# ============================================================================
# TEST FEATURES
# ============================================================================
RUN_MIGRATIONS=true
ENABLE_HOT_RELOAD=false
ENABLE_DEBUG_ENDPOINTS=false
ENABLE_SWAGGER_UI=false

# Minimum seconds between email resend attempts
EMAIL_MIN_RESEND_COOLDOWN=60

# API exposed port for external connections
API_PORT=10310
